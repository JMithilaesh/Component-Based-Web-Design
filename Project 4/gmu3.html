
<!doctype html>
<?xml version = "1.0" encoding = "utf-8"?> 
<html xmlns = "http://www.w3.org/1999/xhtml">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"> 
<head>
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <link rel="stylesheet" type="text/css" href="http://mason.gmu.edu/~mjayakum/testaccess/jquery-ui.css">
  <link rel="stylesheet" type="text/css" href="http://mason.gmu.edu/~mjayakum/testaccess/jquery-ui.structure.css">
  <link rel="stylesheet" type="text/css" href="http://mason.gmu.edu/~mjayakum/testaccess/jquery-ui.theme.css">
  <link rel="stylesheet" href="styles.css">
  <title>Survey form on visit to GMU</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
    div .bottom {
      position: fixed;
      right:0;
      bottom:0;
    }
    h1.green { 
      color: #006633;
    }

  </style>
  <!-- Styles for this template -->
  <link href="form-validation.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container">
   <div class="mb-3 py-5 text-center" style="background-color:#006633" >
     <img src="dept.png" style="width:100%" alt="Logo" align="center" >
     <div class="mb-3 py-5 text-center" style="background-color:#FFCC33">
      <h1 class='green' style="font-family:Times New Roman;">Survey form</h1>
      <p class="lead">Below is an survey form for the students who visited GMU recently and their experience in the campus to improve the facilities with the valuable feedback of the students.</p>
    </div>
  </div>

  <div id="DisplayHere"></div>
  <div id="NewUser"></div>

  <div>
  </div>

  <div>
   <id="cookieTest" style="font-family:Times New Roman;"></id>
 </div>  
 <div class="mb-3">
  <form class="form-validation" name = "SurveyForm" method = "post" autocomplete="on">
    <h4 class="mb-3">Contact information</h4>
    <!--Beginning of the Survey form-->
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="Name" >First name of the student<span class="text-muted">(Required)</span></label>
        <input type="text" class="form-control" id="Name" required autofocus>
        <div class="invalid-feedback">
          Valid first name is required.
        </div>
      </div>
       <div class="col-md-6 mb-3">
        <label for="id" >Gid of student<span class="text-muted">(Required)</span></label>
        <input type="number" class="form-control" id="number" required autofocus>
        <div class="invalid-feedback">
          Valid Gid is required.
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="LastName">Last name of the student</label>
        <input type="text" class="form-control" id="LastName" required>
        <div class="invalid-feedback">
          Valid last name is required.
        </div>
      </div>
    </div>
    <div class="mb-3">
      <label for="email">Email id<span class="text-muted">(Required)</span></label>
      <input type="email" class="form-control" id="email" placeholder="yourid@example.com" required>
      <div class="invalid-feedback">
        Please enter a valid email address
      </div>
    </div>

    <div class="mb-3">
      <label for="address">Address</label>
      <input type="text" class="form-control" id="address" placeholder="Street Address" required>
      <div class="invalid-feedback">
        Please enter your address.
      </div>
    </div>


    <div class="mb-3">
      <label for="address">Address 2<span class="text-muted">(Optional)</span></label>
      <input type="text" class="form-control" id="address2" placeholder="Apartment or suite">
    </div>
  </div>

  <div class="mb-3">
    <label for="data">Number Field<span class="text-muted">(Required)</span></label>
    <input type="text" class="form-control" id="data" placeholder="1,3,4,7,..." onblur="maxAvgCalc()">
    <div id="errorMsg" style="color: red"></div>
    <div class="row">
      <label class="col-md-6 mb-3">Average: <label id="average">0</label></label>
      <label class="col-md-6 mb-3">Maximum: <label id="maximum">0</label></label>
    </div>
  </div>

  <div class="mb-3">
    <label for="Contact number">Contact Number<span class="text-muted">(Required)</span></label>
    <input type="tel" class="form-control" id="tel" placeholder="(XXX)-XXX-XXXX" pattern = "\(\d{3})-\d{3}-d{4}" required>
    <div class="invalid-feedback">
      Please enter a valid contact number.
    </div>
  </div>
  <div class="mb-3">
    <label for="zipcode">Zipcode<label style="color: red">*</label></label>
    <input type="text" class="form-control" id="zipcode" placeholder="zipcode" onblur="checkZipcodes()">
    <div class="invalid-feedback" style="width: 100%;">
      Please enter zipcode.
    </div>
    <div id="errorZip" style="color: red"></div>
  </div>

    <div class="col-md-6 mb-3">
      <label for="city">City: <label id="City">Enter City</label></label>
      <div class="invalid-feedback" style="width: 100%;">
        Please enter valild city.
      </div>
    </div>
   <div class="col-md-6 mb-3">
      <label for="state">State: <label id="State">Enter Zip</label></label>
      <div class="invalid-feedback" style="width: 100%;">
        Please enter valid state.
      </div>
    </div>
  <div class="mb-3">
    <label for = "date">Today's Date</label>
    <input type = "date" class = "form-control" placeholder="mm-dd-yyyy" required>
  </div>

  <div class ="mb-3">
    <label for = "number">Expected year of High-School Graduation</label>
    <input type= "number" class = "form-control" placeholder="yyyy" style="width: 25%" required>
  </div>
  <div class="mb-3">
    <label for = "text">Expected month of High-School graduation</label>
    <input list="months" class = "form-control" style="width: 25%">
    <!--list of the months for graduation-->
    <datalist id="months">
      <option value="January">
      <option value="February">
      <option value="March">
      <option value="April">
      <option value="May">
      <option value="June">
      <option value="July">
      <option value="August">
      <option value="September">
      <option value="October">
      <option value="November">  
      <option value="December">
      </datalist>
  </div>

  <hr class="mb-4">

  <h4 class="mb-3">Feedback form</h4>

  <div class="d-block my-3" id = "liked">
    <p>
      <strong>Things you liked at GMU :</strong><br/>
      <div>
        <input name = "students" type = "checkbox" id = "students"/>
        <label for="students">Students</label>
      </div>
      <div> 
        <input name = "Location" type = "checkbox" id = "Location" />
        <label for="Location">Location</label>
      </div>
      <div>
        <input name = "Campus" type = "checkbox" id = "Campus"/>
        <label for="Campus">Campus</label>
      </div>
      <div>
       <input name = "Atmosphere" type = "checkbox" id = "Atmosphere"/>
       <label for="Atmosphere">Atmosphere</label>
     </div>
     <div>
      <input name = "Dorm rooms" type = "checkbox" id = "Dorm rooms" />
      <label for="Dorm rooms">Dorm rooms</label>
    </div>
    <div>
      <input name = "Sports" type = "checkbox" id = "Sports" />
      <label for="Sports">Sports</label>
    </div>
  </p> 
  <p>
    <b>What has gained your interest towards GMU ??</b>><br/>
    <div id = "interest">
      <input name = "interest" type = "Radio" id = "Friends" />
      <label for = "Friends">Friends</label>
    </div>
    <div>
      <input name = "interest" type = "radio" id = "Television" />
      <label for="Television">Television</label>
    </div>
    <div>
      <input name = "interest" type = "radio" id = "Internet" />
      <label for="Internet">Internet</label>
    </div>
    <div>
      <input name = "interest" type = "radio" id = "Others" />
      <label for="Others">Others</label>
    </div>
    <div>
    </p>
    <label><b>Your views on GMU in few words:</b><br/>
     <textarea name = "comments" rows = "5" cols = "100">Enter your review here..</textarea>
   </label>
 </div>
 <label> How likely would you like to recommend GMU to your friends or colleagues </label>
 <input list="Opinion">
 <datalist id="Opinion">
  <!--dropdown list for opinion on the feedback of the college-->
  <option value="Very likely">
    <option value="Likely">
      <option value="Less Likely">
      </datalist>
      <hr class="mb-4">
      <!--Submit button is created to submit the form-->
      <button class="btn btn-primary btn-lg btn-block" type="reset" onclick="FormReset()">Reset</button>
      <button class="btn btn-primary btn-lg btn-block" type="submit" onclick="return validate_form()">Submit the feedback</button>
      <button class="btn btn-primary btn-lg btn-block" onclick="window.location.href = 'http://mason.gmu.edu/~mjayakum/testaccess/website2.html'">Go Back</button>

    </form>
  </div>
</div>
<div>
  <a href="https://www2.gmu.edu/"> 
    <img src="mason-logo.png" width="5%" alt="GMU" class = "bottom"> 
  </div>
  <footer class="my-5 pt-5 text-muted text-center text-small">
  </footer>
</div>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script>
  var today = new Date();
  var time = today.getHours(); 
  var name;
  var greetingMessage;
  if ( time < 12 )
  {
    greetingMessage = "Good Morning ";
  }
  else
  {
    time = time - 12;
    if ( time < 6 )
    {
      greetingMessage =  "Good Afternoon ";
    }
    else
    {
      greetingMessage =  "Good Evening ";
    }
  }
  function setCookie(name, value, days) 
  {
    var newDate = new Date;
    newDate.setTime(newDate.getTime() + 24*60*60*1000*days);
    document.cookie = name + "=" + value + ";path=/;expires=" + newDate.toGMTString();
  }
  function getCookie(name) 
  {
    var matchCookie = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');     
    return matchCookie ? matchCookie[2] : '';
  }
 
  nameCookie = getCookie('name');
  if(nameCookie != '')
  {
    name = nameCookie;
  } 
  else
  {
    name = window.prompt( "Please enter your name", "" );
    setCookie('name',name,3);
  }
  document.getElementById("DisplayHere").innerHTML = "<h5>"+greetingMessage+name+", Welcome to SWE 642 Assignment"+"</h5>"
  document.getElementById("NewUser").innerHTML = "<a href='javascript:deleteCookie()'> Not "+name+"? Please click here</a>"
 
  function deleteCookie() 
  { 
    setCookie('name', '', -1); 
    location.reload();
  }
 
  function maxAvgCalc()
  {
    var input = document.getElementById("data").value;
    var tokens = input.split( "," ); 
    var sumOfNumbers=0;
    if (tokens.length <10) 
    {
      errorMsg
      document.getElementById("errorMsg").innerHTML = "Please Enter 10 numbers....";
    }
    else
    {
      document.getElementById("errorMsg").innerHTML = "";
      for (var i=0; i<tokens.length; i++)
      {
        tokens[i] = parseInt(tokens[i], 10);
        sumOfNumbers+= tokens[i];
        if (tokens[i]<100 || tokens[i]>1) 
        {
          var error = 0;
        }
        else
        {
          error = 1;
        }
      }
 
      if (error!=1) 
      {
        var maximum = Math.max.apply(Math,tokens);
        var average = sumOfNumbers/tokens.length;
        document.getElementById("average").innerHTML = average;
        document.getElementById("maximum").innerHTML = maximum;
      }
      else
      {
        document.getElementById("errorMsg").innerHTML = "Please Enter numbers between 1 to 100";
      }
    }
  }
 
 
  function checkZipcodes() 
  {
   var zipcode = document.getElementById("zipcode").value;
   var xhttp = new XMLHttpRequest();
   xhttp.onreadystatechange = function() 
   {
     if (this.readyState == 4 && this.status == 200) 
     {
       var data = JSON.parse(xhttp.responseText) 
       var zips = data.zipcodes
       var zipValid = 0;
       for (i = 0; i < zips.length; i++) 
       {
         if (zipcode == zips[i].zip) 
         {
           zipValid = 1;
           document.getElementById("City").innerHTML = zips[i].city;
           document.getElementById("State").innerHTML = zips[i].state;
         }
       }

       if (zipValid != 1)
       {
         document.getElementById("City").innerHTML = 'NA';
         document.getElementById("State").innerHTML = 'NA';
         document.getElementById("errorZip").innerHTML = 'Please enter a valid zipcode';
       }   
     }
   };
   xhttp.open("GET", "http://mason.gmu.edu/~mjayakum/testaccess/zipcodes.json", true, "swe642", "swe642mj");
   xhttp.send();
  } 
 
 
  function validate_form()
  {
   var firstname = document.getElementById("Name").value;
   var lastname = document.getElementById("LastName").value;
   var address = document.getElementById("address").value;
   var email = document.getElementById("email").value; 
   var string1 = /^[a-zA-Z]+$/;
   var string2 = /^[!*+=&^%$#<>()\[\]\\.,;:\s@"]+$/;
   var string3 =  /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
   var message = "";
 
   if (firstname == null || firstname == "") 
   {
     message += "Please enter a first name \n";
   }
   if (!string1.test(firstname)) 
   {
     message += 'Only alphabets should be used for Names\n';
     document.getElementById("Name").value = "";
   }
   if (lastname == null || lastname == "") 
   {
     message += "Please enter a last name \n";
   }
   if (!string1.test(lastname)) 
   {
     message += 'Only alphabets should be used for Names\n';
     document.getElementById("LastName").value = "";
   }
   if (email == null || email == "") 
   {
     message += "Email cannot be empty \n";
   }
   if (!string3.test(email))
   { 
     message += "Enter a valid mail id\n";
     document.getElementById("email").value = "";
   }
   if (address == null || address == "") 
   {
     message += "Address cannot be empty \n";
   }
   if (string2.test(address)) 
   {
     message += 'No special characters allowed for address field \n';
     document.getElementById("address").value = "";
   }
   var checkBoxes = document.querySelectorAll('input[type="checkbox"]:checked').length
   if (checkBoxes < 2) 
   {
     message += "Please check atleast two checkboxes\n";
   }
 
   var radioButtons = document.querySelector('input[name = "interest"]:checked')
   if (radioButtons == null) 
   {
     message += "Please select a radio button";
   }
 
   function FormReset()
   {
     document.getElementById("SurveyForm").reset()
   }
 
 
   console.log("errorMessage", message);
   if (message != "") 
   {
     console.log("in alert");
     alert(message);
     return false;
   } 
   else 
   {
     return true;
   }
   }
</script>
</body>
</html>